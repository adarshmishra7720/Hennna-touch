<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Henna Touch - Project Documentation</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background: #fff;
        }
        @media print {
            body { max-width: 100%; padding: 0; }
            .no-print { display: none; }
            a { text-decoration: none; color: #000; }
        }
        pre {
            background: #f6f8fa;
            padding: 16px;
            border-radius: 6px;
            overflow-x: auto;
        }
        code {
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
            font-size: 0.9em;
            background: #f6f8fa;
            padding: 0.2em 0.4em;
            border-radius: 3px;
        }
        pre code {
            padding: 0;
            background: transparent;
        }
        h1, h2, h3 { border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; margin-top: 24px; }
        h1 { font-size: 2em; }
        h2 { font-size: 1.5em; }
        .mermaid { margin: 20px 0; text-align: center; }
        .btn {
            display: inline-block;
            background: #0070f3;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            margin-bottom: 20px;
            cursor: pointer;
        }
        .btn:hover { background: #0051a2; }
    </style>
</head>
<body>

    <div class="no-print" style="text-align: right; margin-bottom: 2rem; border-bottom: 1px solid #eee; padding-bottom: 1rem;">
        <button onclick="window.print()" class="btn">üñ®Ô∏è Print to PDF</button>
        <p style="font-size: 0.9em; color: #666;">Click the button above and select "Save as PDF" as the destination.</p>
    </div>

    <!-- Markdown Content Container -->
    <div id="content"></div>

    <!-- Visual Diagrams Section -->
    <h2>5. Visual Flows & Interactions</h2>
    
    <h3>A. File Interaction Map</h3>
    <p>This diagram shows how specific files rely on each other to make the application work.</p>
    <div class="mermaid">
    graph TD
        Browser[Browser Request]
        
        subgraph Routing & Security
            Middleware[middleware.ts]
            Layout[layout.tsx]
        end

        subgraph Core Pages
            Home[page.tsx]
            Admin[admin/page.tsx]
        end

        subgraph Components
            Navbar[components/Navbar]
            Contact[components/ContactForm]
            Hero[components/Hero]
        end

        subgraph Backend Logic
            Actions[actions.ts]
            Supabase[lib/supabase.ts]
        end

        Browser -->|1. Hit URL| Middleware
        Middleware -->|Allowed| Layout
        Layout -->|Wraps| Home
        Layout -->|Imports| Navbar
        
        Home -->|Imports| Hero
        Home -->|Imports| Contact
        
        Contact -.->|2. Submits Booking| Actions
        Actions -->|3. Save Data| Supabase
    </div>

    <h3>B. Application Sitemap</h3>
    <div class="mermaid">
    graph TD
        Home[Home Page /]
        Services[Services Section]
        Portfolio[Portfolio Section]
        Contact[Contact Form]
        Admin[Admin Panel /admin]

        Home --> Services
        Home --> Portfolio
        Home --> Contact
        Visitor --> Home
        AdminUser --> Admin
    </div>

    <h3>C. Booking Data Flow</h3>
    <div class="mermaid">
    sequenceDiagram
        participant User
        participant UI as Contact Form
        participant Server as Server Action
        participant DB as Supabase (Leads)

        User->>UI: Fills Name, Phone, Service
        User->>UI: Clicks "Book Now"
        UI->>Server: POST /actions (submitBooking)
        Server->>Server: Validate Data
        Server->>DB: INSERT into leads
        DB-->>Server: Success/Error
        Server-->>UI: Return Result
        UI-->>User: Show Toast Notification
    </div>

    <script>
        // Raw Markdown Content
        const markdownContent = `
# Henna Touch Project Documentation

This document provides a comprehensive overview of the **Henna Touch** project.

## 1. Project Overview

**Henna Touch** is a web application for a Mehndi Artist, built with modern web technologies to ensure performance, SEO, and a premium user experience.

### Technology Stack
- **Framework**: [Next.js 14](https://nextjs.org/) (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **Database**: Supabase (PostgreSQL)
- **Icons**: Lucide React
- **Authentication**: Basic Auth (for Admin panel)

## 2. File Structure

\`\`\`
e:/henna touch/
‚îú‚îÄ‚îÄ app/                    # Main application code
‚îÇ   ‚îú‚îÄ‚îÄ admin/              # Admin dashboard
‚îÇ   ‚îú‚îÄ‚îÄ components/         # Reusable UI components
‚îÇ   ‚îú‚îÄ‚îÄ lib/                # Utilities & Supabase client
‚îÇ   ‚îú‚îÄ‚îÄ actions.ts          # Server Actions
‚îÇ   ‚îú‚îÄ‚îÄ globals.css         # Global styles
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx          # Root layout
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx            # Home page
‚îú‚îÄ‚îÄ supabase/               # Database files
‚îú‚îÄ‚îÄ middleware.ts           # Admin Auth protection
‚îî‚îÄ‚îÄ tailwind.config.ts      # Tailwind configuration
\`\`\`

## 3. Detailed File Interactions

How the key files speak to each other:

- **\`middleware.ts\` -> \`app/admin/...\`**: 
  The Middleware acts as a security guard. Before any request reaches the \`admin\` folder, it checks for credentials.

- **\`app/layout.tsx\` -> \`app/page.tsx\`**: 
  The Layout is the "shell" of your website. It imports the \`Navbar\` and \`Footer\` once, and then injects the content of \`page.tsx\` (or any other page) inside them. This way, the navigation bar stays visible as you move around.

- **\`app/components/ContactForm.tsx\` -> \`app/actions.ts\`**: 
  The component handles the user input (UI), but it can't talk to the database directly for security reasons. Instead, it calls a function in \`actions.ts\`.

- **\`app/actions.ts\` -> \`app/lib/supabase.ts\`**: 
  The Server Action receives the data, cleans it up, and then uses the \`supabase\` client (defined in \`lib/supabase.ts\`) to actually write the data into the PostgreSQL database.

## 4. How to Make Changes

### A. Modifying Content
1. Navigate to \`app/\`.
2. Edit \`page.tsx\` (Home) or other page files.
3. Update text in JSX or styles in \`className\`.

### B. Creating Components
1. Create new file in \`app/components/\`.
2. Export a React function.
3. Import in your page.

### C. Database Schema
1. Source of truth: \`supabase/schema.sql\`.
2. Apply changes via Supabase SQL Editor.

## 5. Running the Project

**Development**: \`npm run dev\` (http://localhost:3000)
**Production**: \`npm run build\` then \`npm start\`
`;

        // Render Markdown
        document.getElementById('content').innerHTML = marked.parse(markdownContent);

        // Initialize Mermaid
        mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>
</body>
</html>
